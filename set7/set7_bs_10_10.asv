clear; clc

rng(0)

%% part 4 

syms xa xb pa pb 

h = ( (xa - pa)^2 + (xb - pb)^2 )^(1/2); 

H_fn = matlabFunction(jacobian(h, [pa pb])); 

syms sigma_r 

R = diag([sigma_r^2 sigma_r^2]); 
R_fn = matlabFunction(diag([sigma_r^2 sigma_r^2])); 

% P = ( H.' * R^-1 * H )^-1;

%% part 5 

p0a = 0; 
p0b = 0; 
x1a = -10^4; 
x1b = 10^5; 
x2a = 10^4; 
x2b = 10^5; 

H = [ H_fn(p0a, p0b, x1a, x2b); 
      H_fn(p0a, p0b, x2a, x2b) ]; 
  
P = inv( H.' * inv(R) * H); 




